<!DOCTYPE html>
<html>

<head>
    <title>
        KOTLC Neighlish Translator
    </title>

</head>

<style>
    /* latin */
    @font-face {
        font-family: 'Calligraffitti';
        font-style: normal;
        font-weight: 400;
        src: url(https://fonts.gstatic.com/s/calligraffitti/v12/46k2lbT3XjDVqJw3DCmCFjE0vkFeOZc.woff2) format('woff2');
        unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }

</style>

<body>
    <h1 style="text-align: center; font-family: Calligraffitti; font-size: 50px;">KOTLC Silveny Speech</h1>
    <div style="margin-top: 1.5%; height: 20vh; box-shadow: 0px 8px 9px -5px rgba(0, 0, 0, 0.2),
    0px 15px 22px 2px rgba(0, 0, 0, 0.14),
    0px 6px 28px 5px rgba(0, 0, 0, 0.12); margin-left: auto; text-align: center;">
        <input style="font-family: 'Courier New', Courier, monospace; margin-top: 2.5%; display: inline-block; margin: auto; box-shadow: 0px 8px 9px -5px rgba(0, 0, 0, 0.2),
            0px 15px 22px 2px rgba(0, 0, 0, 0.14),
            0px 6px 28px 5px rgba(0, 0, 0, 0.12); height: 50px; font-size: 50px;" type="text" id='js-input-trans' placeholder="Input" />
        <input style="font-family: 'Courier New', Courier, monospace; margin-top: 2.5%; display: inline-block; box-shadow: 0px 8px 9px -5px rgba(0, 0, 0, 0.2),
            0px 15px 22px 2px rgba(0, 0, 0, 0.14),
            0px 6px 28px 5px rgba(0, 0, 0, 0.12); height: 50px; font-size: 50px;" type="text" id="js-output-trans" placeholder="Output" readonly />
    </div>
</body>

<script>
    const dictionary = {
        "Neigh": "Hi",
        "Néigh": "Fly",
        "Nneigh": "Friend",
        "Ṅeigh": "Help",
        "Nee": "Dead",
        " ": " ",
        "Eigh": "Sleep",
        "Neiǧh": "Home",
        "Neɨgh": "Elf",
        "Ɲeigh": "School/hell",
        "Neeeiigh": "very/naughty/word",
        "Negh": "sad",
        "Neo": "No",
        "Nieghe": "Chill",
        "Hniegh": "book",
        "Neihg": "come",
        "Nee": "play",
        "Nieggh": "genius",
        "Nogh": "Now",
        "Noeigh": "More",
        "Neiogh": "Less",
        "Eig": "Pain",
        "Ni": "die",
        "Nogḥ": "work",
        "N": "in",
        "Giddy up": "go",
        "Noeiiigh": "hole",
        "Nieό": "human",
        "N": "I",
        "Nhem": "them",
        "Igh": "end",
        "Ne": "start",
        "No": "OwensMusic",
        "Ha": "of",
        "Neigh": "Good",
        "Nah": "Bad",
    };

    const letterDic = {
        "A": "I",
        "B": "gh",
        "C": "ei",
        "D": "w",
        "E": " ė",
        "F": "ie",
        "G": "Gh",
        "H": "Hg",
        "I": "Ô",
        "J": "eg",
        "K": "ဌ",
        "L": "nie",
        "M": "Ń",
        "N": "NN",
        "O": "Y ",
        "P": "hn",
        "Q": "ğ",
        "R": "ñ",
        "S": "ö",
        "T": "T",
        "U": "Oh ",
        "V": "G",
        "W": "ẻ",
        "X": "Ĭ",
        "Y": "Nne",
        "Z": "9",
    }

    var inputField = document.getElementById('js-input-trans');
    var outputField = document.getElementById('js-output-trans');
    inputField.addEventListener('input', inputEvent);

    function inputEvent(event) {
        var val = event.target.value;
        var words = val.split(' ');
        var newString = '';

        for (let z = 0; z < words.length; z++) {
            let element = filterPunctuation(words[z]);

            var prefix = "\"" + words[z] + "\": \"";
            var suffix = "\",";

            newString += prefix + findValueByKey(element[0]) + suffix + element[1];
        }
        outputField.value = newString;
        console.log(newString);
    }

    function findValueByKey(searchKey) {
        for (const [key, value] of Object.entries(dictionary))
            if (value.toLowerCase() == searchKey.toLowerCase())
                if (searchKey.charAt(0) == searchKey.charAt(0).toUpperCase())
                    return key;
                else
                    return key.charAt(0).toLowerCase() + key.substr(1);

        const baseStringStart = "N";
        const baseStringEnds = ["eh", "heh", "he", "gh", "heg", "dg"];
        let middleOfString = '';

        const charArr = searchKey.split('');
        for (let v = 0; v < charArr.length; v++) {
            const element = charArr[v];
            for (const [key, value] of Object.entries(letterDic))
            {
                if (key.toLowerCase() == charArr[v].toLowerCase())
                    middleOfString += value;
            }
        }
        return baseStringStart + middleOfString + baseStringEnds[Math.floor(Math.random() * baseStringEnds.length)];
    }

    function getPrefix(z, words) {
        if (z == 0) return ''; // No previous char
        if (words[z - 1] == ' ') // Previous char is space
            return '';
        return ' '; // Space since last char is part of word
    }

    function filterPunctuation(string) {
        let newString;
        let punc2;
        const punc = [
            '.',
            ',',
            '?',
            '!',
            ';',
        ];
        punc.forEach(element => {
            if (string.includes(element)) {
                newString = string.replace(element, '');
                punc2 = element;
            }
        });
        if (!punc2) {
            newString = string;
            punc2 = "";
        }

        return [newString, punc2];
    }

</script>

</html>
